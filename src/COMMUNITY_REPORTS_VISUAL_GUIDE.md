# Community Reports - Visual Testing Guide ðŸŽ¯

## Quick Test Flow

### ðŸ“± Step 1: User Reports a Discussion

**Path**: `Home â†’ Community â†’ [Any Discussion] â†’ Flag Icon`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ“– Discussion Title                    â”‚
â”‚  by John Doe â€¢ 2 hours ago             â”‚
â”‚  Category: Book Discussion             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Discussion content here...      â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  [â¤ï¸ Like] [ðŸ’¬ Reply] [ðŸ”— Share] [ðŸš© Report] â† Click here!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ðŸ“ Step 2: Select Report Reason

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Report Discussion                         â”‚
â”‚  Why are you reporting this discussion?   â”‚
â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ âš¡ Spam/     â”‚  â”‚ ðŸ›¡ï¸ Harassmentâ”‚      â”‚
â”‚  â”‚  Promotional â”‚  â”‚   or Bullying â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ âš ï¸ Inappropriateâ”‚ ðŸ“„ Misinformationâ”‚   â”‚
â”‚  â”‚    Content    â”‚  â”‚               â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Â© Copyright  â”‚  â”‚ â“ Other      â”‚      â”‚
â”‚  â”‚  Violation   â”‚  â”‚               â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                            â”‚
â”‚  Additional details (optional):           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Type additional context here...    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                            â”‚
â”‚  [Cancel]  [Submit Report]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ðŸ”§ Step 3: Admin Views Report

**Path**: `Admin Panel â†’ Community Tab â†’ Community Reports`

```
Admin Panel
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Books] [Reviews] [Users] [Community] â† Click here      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Community Management
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Active Discussions] [Community Reports (2)] â† See countâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Filter: [Pending â–¼]  â† Default shows pending reports
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ðŸŸ¡ "Best Fantasy Books of 2024"         [Pending]â”‚    â”‚
â”‚ â”‚   Type: Discussion â€¢ By: Jane Smith              â”‚    â”‚
â”‚ â”‚                                                  â”‚    â”‚
â”‚ â”‚   Reported By: John Doe                          â”‚    â”‚
â”‚ â”‚   Reason: [Spam/Promotional]                     â”‚    â”‚
â”‚ â”‚   Date: Oct 28, 2025                             â”‚    â”‚
â”‚ â”‚                                                  â”‚    â”‚
â”‚ â”‚   Additional Details:                            â”‚    â”‚
â”‚ â”‚   "This post contains affiliate links..."        â”‚    â”‚
â”‚ â”‚                                                  â”‚    â”‚
â”‚ â”‚   [âœ— Dismiss]  [âœ“ Resolve]                       â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Status Filter Options

```
Filter by Status: [Pending â–¼]
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â€¢ All Reports (5)   â”‚
                     â€¢ Pending (2) â† Default
                     â€¢ Resolved (2)      â”‚
                     â€¢ Dismissed (1)     â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Color Codes

### Report Status Border Colors
- ðŸŸ¡ **Yellow Border** = Pending (needs attention)
- ðŸŸ¢ **Green Border** = Resolved (action taken)
- âš« **Gray Border** = Dismissed (no action needed)

### Status Badges
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pending â”‚  â”‚ Resolved â”‚  â”‚ Dismissed â”‚
â”‚ ðŸŸ¡ bg   â”‚  â”‚ ðŸŸ¢ bg    â”‚  â”‚ âš« bg     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Admin Actions

### For Pending Reports:

**âœ— Dismiss Button**
- Marks report as "Dismissed"
- Use when: Report is not valid or doesn't violate guidelines
- Effect: Moves to "Dismissed" filter, no action taken on content

**âœ“ Resolve Button**
- Marks report as "Resolved"
- Use when: Report is valid and you've taken action
- Effect: Moves to "Resolved" filter, indicates action was taken

### For Resolved/Dismissed Reports:
- Shows status text: "Resolved" or "Closed"
- No action buttons (already processed)

## Testing Checklist

### âœ… User Side
- [ ] Navigate to any discussion
- [ ] Click Flag icon (ðŸš©)
- [ ] Report dialog opens
- [ ] Select a reason (required)
- [ ] Add optional description
- [ ] Click "Submit Report"
- [ ] See success toast: "Discussion reported successfully..."

### âœ… Admin Side
- [ ] Login as admin
- [ ] Go to Admin Panel â†’ Community â†’ Community Reports
- [ ] See "(2)" in tab title (dynamic count)
- [ ] Default filter shows "Pending"
- [ ] Report card displays:
  - [ ] Discussion title
  - [ ] Report status badge
  - [ ] Reporter name
  - [ ] Reason badge
  - [ ] Date
  - [ ] Additional details (if provided)
  - [ ] Action buttons (Dismiss/Resolve)
- [ ] Click "Dismiss" â†’ moves to Dismissed filter
- [ ] Click "Resolve" â†’ moves to Resolved filter
- [ ] Change filter dropdown â†’ see different reports
- [ ] Counts in dropdown are accurate

## Real-Time Updates

When you take action:
1. **Dismiss** a report â†’ Count decreases in "Pending", increases in "Dismissed"
2. **Resolve** a report â†’ Count decreases in "Pending", increases in "Resolved"
3. **Filter changes** â†’ Content updates immediately
4. **New report submitted** â†’ Appears in Pending (may need refresh)

## Data Flow Diagram

```
User                    Database                    Admin
  â”‚                        â”‚                          â”‚
  â”‚  1. Submit Report      â”‚                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
  â”‚                        â”‚                          â”‚
  â”‚  2. Store in DB        â”‚                          â”‚
  â”‚                        â”‚  3. Query Reports        â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                          â”‚
  â”‚                        â”‚  4. Display in UI        â”‚
  â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                        â”‚                          â”‚
  â”‚                        â”‚  5. Admin Action         â”‚
  â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚  (Dismiss/Resolve)       â”‚
  â”‚                        â”‚                          â”‚
  â”‚                        â”‚  6. Update Status        â”‚
  â”‚                        â”‚                          â”‚
  â”‚                        â”‚  7. Refresh List         â”‚
  â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
```

## Common Scenarios

### Scenario 1: Spam Report
1. User sees promotional content in discussion
2. Clicks Flag â†’ Selects "Spam/Promotional"
3. Adds note: "Contains multiple affiliate links"
4. Admin reviews â†’ Clicks "Resolve"
5. Report moved to "Resolved" status

### Scenario 2: False Report
1. User mistakenly reports legitimate content
2. Reports with "Inappropriate Content"
3. Admin reviews â†’ Content is fine
4. Clicks "Dismiss" â†’ No action needed
5. Report moved to "Dismissed" status

### Scenario 3: Harassment Report
1. User reports harassment in discussion
2. Selects "Harassment or Bullying"
3. Provides context in description
4. Admin reviews and takes action on user
5. Clicks "Resolve" â†’ Issue handled

## Database Check (For Debugging)

Run in Supabase SQL Editor:
```sql
-- Check all reports
SELECT * FROM discussion_reports 
ORDER BY created_at DESC;

-- Count by status
SELECT status, COUNT(*) 
FROM discussion_reports 
GROUP BY status;

-- Check recent reports
SELECT 
  dr.content_title,
  dr.reporter_name,
  dr.reason,
  dr.status,
  dr.created_at
FROM discussion_reports dr
WHERE created_at > NOW() - INTERVAL '7 days'
ORDER BY created_at DESC;
```

---

## Quick Reference

| Action | Location | Effect |
|--------|----------|--------|
| Report Discussion | Discussion Page â†’ Flag Icon | Creates new report |
| View Reports | Admin â†’ Community â†’ Reports | Shows all reports |
| Filter Reports | Reports Tab â†’ Dropdown | Filters by status |
| Dismiss Report | Report Card â†’ Dismiss Button | Marks dismissed |
| Resolve Report | Report Card â†’ Resolve Button | Marks resolved |

**Status**: Ready for Testing âœ…  
**No Additional Setup Required**
